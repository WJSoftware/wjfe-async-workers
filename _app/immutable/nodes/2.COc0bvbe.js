var Vt=Object.defineProperty;var ut=t=>{throw TypeError(t)};var Zt=(t,e,r)=>e in t?Vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var K=(t,e,r)=>Zt(t,typeof e!="symbol"?e+"":e,r),Be=(t,e,r)=>e.has(t)||ut("Cannot "+r);var i=(t,e,r)=>(Be(t,e,"read from private field"),r?r.call(t):e.get(t)),x=(t,e,r)=>e.has(t)?ut("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),I=(t,e,r,a)=>(Be(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r),Y=(t,e,r)=>(Be(t,e,"access private method"),r);var De=(t,e,r,a)=>({set _(s){I(t,e,s,r)},get _(){return i(t,e,a)}});import{c as Qe,b as N,t as O,d as Xt}from"../chunks/disclose-version.BbTG94Gn.js";import{i as er,I as Ve,z as tr,u as W,h as Et,aj as rr,J as Nt,ak as ar,D as C,r as me,q as qe,aa as ne,B as dt,a2 as ft,al as ht,am as vt,an as pt,M as ze,N as Ne,ag as sr,j as Tt,x as nr,ao as ir,U as or,ap as cr,aq as lr,ar as ur,O as dr,as as fr,at as hr,P as vr,R as ve,au as pr,v as _r,av as mr,aw as gr,ax as wr,Q as Mt,y as Me,af as E,ad as m,ay as Oe,ae as g,t as Ot,ac as G,w as Ct,F as d,ai as se,Y as Ue,a6 as _t,az as yr}from"../chunks/runtime.DnJ25dge.js";import{i as br,c as mt,d as $t,n as kr,a as Ir,b as Sr,s as ie}from"../chunks/render.BQSV-G8m.js";import{i as ge,r as xr,p as Ar,b as Er,a as jt}from"../chunks/props.DOwdSgma.js";function Nr(t,e=!1){return Te(t,new Map)}function Te(t,e,r,a){if(typeof t=="object"&&t!==null){const n=e.get(t);if(n!==void 0)return n;if(t instanceof Map)return new Map(t);if(t instanceof Set)return new Set(t);if(er(t)){const o=[];e.set(t,o);for(let _=0;_<t.length;_+=1)o.push(Te(t[_],e));return o}if(Ve(t)===tr){const o={};e.set(t,o);for(var s in t)o[s]=Te(t[s],e);return o}if(t instanceof Date)return structuredClone(t);if(typeof t.toJSON=="function")return Te(t.toJSON(),e)}if(t instanceof EventTarget)return t;try{return structuredClone(t)}catch{return t}}const Ge=0,xe=1,Je=2;function Tr(t,e,r,a,s){W&&Et();var n=t,o=rr(),_=nr,y,c,f,h,v=(o?dt:ft)(void 0),A=(o?dt:ft)(void 0),b=!1;function p(l,w){b=!0,w&&(ht(u),vt(u),pt(_)),l===Ge&&r&&(c?ze(c):c=me(()=>r(n))),l===xe&&a&&(f?ze(f):f=me(()=>a(n,v))),l===Je&&s&&(h?ze(h):h=me(()=>s(n,A))),l!==Ge&&c&&Ne(c,()=>c=null),l!==xe&&f&&Ne(f,()=>f=null),l!==Je&&h&&Ne(h,()=>h=null),w&&(pt(null),vt(null),ht(null),sr())}var u=Nt(()=>{if(y!==(y=e())){if(ar(y)){var l=y;b=!1,l.then(w=>{l===y&&(C(v,w),p(xe,!0))},w=>{l===y&&(C(A,w),p(Je,!0))}),W?r&&(c=me(()=>r(n))):qe(()=>{b||p(Ge,!0)})}else C(v,y),p(xe,!1);return ne}});W&&(n=Tt)}function He(t,e,r){W&&Et();var a=t,s=or,n;Nt(()=>{ir(s,s=e())&&(n&&Ne(n),n=me(()=>r(a)))}),W&&(a=Tt)}function Mr(t,e){if(e){const r=document.body;t.autofocus=!0,qe(()=>{document.activeElement===r&&t.focus()})}}let gt=!1;function qt(){gt||(gt=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{var e;if(!t.defaultPrevented)for(const r of t.target.elements)(e=r.__on_r)==null||e.call(r)})},{capture:!0}))}function wt(t){if(W){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var a=t.value;D(t,"value",null),t.value=a}if(t.hasAttribute("checked")){var s=t.checked;D(t,"checked",null),t.checked=s}}};t.__on_r=r,lr(r),qt()}}function D(t,e,r,a){r=r==null?null:r+"";var s=t.__attributes??(t.__attributes={});W&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=r)&&(e==="loading"&&(t[cr]=r),r===null?t.removeAttribute(e):t.setAttribute(e,r))}function Or(t,e,r,a,s=!1,n){var o=e||{},_=t.tagName==="OPTION";for(var y in e)y in r||(r[y]=null);r.class=r.class?r.class+" "+a:a;var c=yt.get(t.nodeName);c||yt.set(t.nodeName,c=$r(t));var f=t.__attributes??(t.__attributes={}),h=[];for(const u in r){let l=r[u];if(_&&u==="value"&&l==null){t.value=t.__value="",o[u]=l;continue}var v=o[u];if(l!==v){o[u]=l;var A=u[0]+u[1];if(A!=="$$")if(A==="on"){const w={},$="$$"+u;let T=u.slice(2);var b=Ir(T);if(br(T)&&(T=T.slice(0,-7),w.capture=!0),!b&&v){if(l!=null)continue;t.removeEventListener(T,o[$],w),o[$]=null}if(l!=null)if(b)t[`__${T}`]=l,$t([T]);else{let j=function(F){o[u].call(this,F)};e?o[$]=mt(T,t,j,w):h.push([u,l,()=>o[$]=mt(T,t,j,w)])}}else if(l==null)f[u]=null,t.removeAttribute(u);else if(u==="style")t.style.cssText=l+"";else if(u==="autofocus")Mr(t,!!l);else if(u==="__value"||u==="value")t.value=t[u]=t.__value=l;else{var p=u;s||(p=kr(p)),c.includes(p)?W&&(p==="src"||p==="href"||p==="srcset")||(t[p]=l):typeof l!="function"&&D(t,p,l)}}}return e||qe(()=>{if(t.isConnected)for(const[u,l,w]of h)o[u]===l&&w()}),o}var Cr=["width","height","draggable"],yt=new Map;function $r(t){for(var e=[],r,a=Ve(t);a.constructor.name!=="Element";){r=ur(a);for(var s in r)r[s].set&&!Cr.includes(s)&&e.push(s);a=Ve(a)}return e}function bt(t,e){var r=t.__className,a=jr(e);W&&t.className===a?t.__className=a:(r!==a||W&&t.className!==a)&&(e==null?t.removeAttribute("class"):t.className=a,t.__className=a)}function jr(t){return t??""}const qr=requestAnimationFrame,Pr=()=>performance.now(),te={tick:t=>qr(t),now:()=>Pr(),tasks:new Set};function Pt(t){te.tasks.forEach(e=>{e.c(t)||(te.tasks.delete(e),e.f())}),te.tasks.size!==0&&te.tick(Pt)}function Rr(t){let e;return te.tasks.size===0&&te.tick(Pt),{promise:new Promise(r=>{te.tasks.add(e={c:t,f:r})}),abort(){te.tasks.delete(e)}}}function Ae(t,e){t.dispatchEvent(new CustomEvent(e))}function Wr(t){const e=t.split("-");return e.length===1?e[0]:e[0]+e.slice(1).map(r=>r[0].toUpperCase()+r.slice(1)).join("")}function kt(t){const e={},r=t.split(";");for(const a of r){const[s,n]=a.split(":");if(!s||n===void 0)break;const o=Wr(s.trim());e[o]=n.trim()}return e}const Fr=t=>t;function fe(t,e,r,a){var s=(t&pr)!==0,n=(t&gr)!==0,o=s&&n,_=(t&wr)!==0,y=o?"both":s?"in":"out",c,f=e.inert,h,v;function A(){return c??(c=r()(e,(a==null?void 0:a())??{},{direction:y}))}var b={is_global:_,in(){var w;if(e.inert=f,!s){v==null||v.abort(),(w=v==null?void 0:v.reset)==null||w.call(v);return}n||h==null||h.abort(),Ae(e,"introstart"),h=Ze(e,A(),v,1,()=>{Ae(e,"introend"),h==null||h.abort(),h=c=void 0})},out(w){if(!n){w==null||w(),c=void 0;return}e.inert=!0,Ae(e,"outrostart"),v=Ze(e,A(),h,0,()=>{Ae(e,"outroend"),w==null||w()})},stop:()=>{h==null||h.abort(),v==null||v.abort()}},p=_r;if((p.transitions??(p.transitions=[])).push(b),s&&Sr){var u=_;if(!u){for(var l=p.parent;l&&l.f&dr;)for(;(l=l.parent)&&!(l.f&fr););u=!l||(l.f&hr)!==0}u&&vr(()=>{ve(()=>b.in())})}}function Ze(t,e,r,a,s){var n=a===1;if(mr(e)){var o,_=!1;return qe(()=>{if(!_){var u=e({direction:n?"in":"out"});o=Ze(t,u,r,a,s)}}),{abort:()=>{_=!0,o==null||o.abort()},deactivate:()=>o.deactivate(),reset:()=>o.reset(),t:()=>o.t()}}if(r==null||r.deactivate(),!(e!=null&&e.duration))return s(),{abort:ne,deactivate:ne,reset:ne,t:()=>a};const{delay:y=0,css:c,tick:f,easing:h=Fr}=e;var v=[];if(n&&r===void 0&&(f&&f(0,1),c)){var A=kt(c(0,1));v.push(A,A)}var b=()=>1-a,p=t.animate(v,{duration:y});return p.onfinish=()=>{var u=(r==null?void 0:r.t())??1-a;r==null||r.abort();var l=a-u,w=e.duration*Math.abs(l),$=[];if(w>0){if(c)for(var T=Math.ceil(w/16.666666666666668),j=0;j<=T;j+=1){var F=u+l*h(j/T),M=c(F,1-F);$.push(kt(M))}b=()=>{var k=p.currentTime;return u+l*h(k/w)},f&&Rr(()=>{if(p.playState!=="running")return!1;var k=b();return f(k,1-k),!0})}p=t.animate($,{duration:w,fill:"forwards"}),p.onfinish=()=>{b=()=>a,f==null||f(a,1-a),s()}},{abort:()=>{p&&(p.cancel(),p.effect=null)},deactivate:()=>{s=ne},reset:()=>{a===0&&(f==null||f(1,0))},t:()=>b()}}function Rt(t,e,r,a=r){t.addEventListener(e,r);const s=t.__on_r;s?t.__on_r=()=>{s(),a()}:t.__on_r=a,qt()}function Lr(t,e,r){Rt(t,"input",()=>{r(It(t)?St(t.value):t.value)}),Mt(()=>{var a=e();if(W&&t.defaultValue!==t.value){r(t.value);return}It(t)&&a===St(t.value)||t.type==="date"&&!a&&!t.value||(t.value=a??"")})}function Br(t,e,r){Rt(t,"change",()=>{var a=t.checked;r(a)}),e()==null&&r(!1),Mt(()=>{var a=e();t.checked=!!a})}function It(t){var e=t.type;return e==="number"||e==="range"}function St(t){return t===""?null:+t}var Dr=O(`<div class="row"><div class="col"><div class="alert alert-warning"><h3><i class="bi bi-house-lock-fill"></i>&nbsp;Cross-Origin Not Isolated</h3> <p>Unfortunately, cross-origin isolation requirements are not fulfilled.  This means that synchronization 
                    objects cannot be used as they depend on <code>SharedArrayBuffer</code>.</p> <p>Without the possiblity of using <code>SharedArrayBuffer</code>, the only way to cancel a work item 
                    (task) is by cancelling it before it starts.  Generally speaking, the following cannot be used:</p> <ul><li><code>ManualResetEvent</code></li> <li><code>AutoResetEvent</code></li> <li><code>CancellationSource</code></li> <li><code>Semaphore</code></li> <li><code>Mutex</code></li></ul> <p>In order to solve this problem in your own project/site, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements" target="_blank">read about the security requirements in the MDN website</a>.</p></div></div></div>`);function zr(t){var e=Qe(),r=Me(e);ge(r,()=>!crossOriginIsolated,a=>{var s=Dr();N(a,s)}),N(t,e)}var Ur=O(`<p>Since cross origin is isolated (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements" target="_blank">the requirements</a> here), you may pause or cancel the worker at any time.</p> <p><strong>NOTE ON PERFORMANCE:</strong> Atomic operations are less performant than polling.  Don't go crazy 
            with the synchronization objects, and see if polling fits the bill first.  For example, the primes worker 
            in this demo page does polling to condition the wait as opposed to blindly waiting:</p> <code class="fs-5"><pre>if (!ManualResetEvent.isSignaled(pause)) &#123;
    ManualResetEvent.wait(pause);
&#125;</pre></code> <p>Still, even with this modification, you'll see a big difference in times between a pausable and a 
            non-pausable run for the same numerical limit.</p>`,1),Gr=O(`<p>Since cross origin is not isolated (see <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements" target="_blank">the requirements</a> here), you may only cancel the worker before it starts.  Furthermore, you cannot pause the worker.</p> <p>To experience the power of the synchronization objects, head to the <a href="https://github.com/WJSoftware/wjfe-async-workers" target="_blank">GitHub repository</a> and clone 
            the source code.  This demonstration's code is inside the folder named <code>pages</code>.  Open a console, 
            change to the <code>pages</code> folder, install the packages running <code>npm ci</code>, and then execute 
            the development server with <code>npm run dev</code>.</p>`,1),Jr=O(`<div class="alert alert-info"><h3><i class="bi bi-journal-text"></i>&nbsp;Instructions</h3> <p>Play around with the three work items below.  Each will run the same example worker, which is a worker that 
        calculates prime numbers using a not-so-good algorithm that runs up to the specified number in the slider.  All 
        three work items use the same worker object, so they run serially between each other.</p> <!></div>`);function Hr(t){var e=Jr(),r=E(m(e),4);ge(r,()=>crossOriginIsolated,a=>{var s=Ur();Oe(6),N(a,s)},a=>{var s=Gr();Oe(2),N(a,s)}),g(e),N(t,e)}var we,oe;class Kr{constructor(e,r=0){x(this,we);x(this,oe);if(globalThis.crossOriginIsolated!==void 0&&!crossOriginIsolated)throw new Error("Cannot operate:  Cross origin is not isolated. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer#security_requirements for details.");I(this,we,new SharedArrayBuffer(8)),I(this,oe,new Int32Array(i(this,we))),Atomics.store(i(this,oe),1,e),Atomics.store(i(this,oe),0,r)}get token(){return i(this,oe)}}we=new WeakMap,oe=new WeakMap;var ye;class Wt extends Kr{constructor(r,a){super(r);x(this,ye);I(this,ye,a)}signal(){Atomics.store(this.token,0,1),Atomics.notify(this.token,0,i(this,ye))}}ye=new WeakMap;const Ee=[1,"manually-resettable event","a"],xt=[3,"cancellation source","a"];function rt(t,e,r,a){if(Atomics.load(t,1)!==e)throw new Error(`The provided token is not that of ${a} ${r}.`)}function Ft(t,e){return rt(e,...t),Atomics.load(e,0)===1}function Yr(t,e,r){return rt(e,...t),Atomics.wait(e,0,0,r)}async function Qr(t,e,r){rt(e,...t);const a=Atomics.waitAsync(e,0,0,r);return a.async?await a.value:a.value}class Xe extends Wt{constructor(){super(Ee[0],void 0)}reset(){Atomics.store(super.token,0,0)}static isSignaled(e){return Ft(Ee,e)}static wait(e,r){return Yr(Ee,e,r)}static waitAsync(e,r){return Qr(Ee,e,r)}}class Lt extends Error{constructor(e,r){super(e,r)}}class at extends Wt{constructor(){super(xt[0],void 0)}static isSignaled(e){return Ft(xt,e)}static throwIfSignaled(e){if(e&&this.isSignaled(e))throw new Lt}}var be;class Se{constructor(e){x(this,be);I(this,be,e)}get cancelledBeforeStarted(){return i(this,be)}}be=new WeakMap;var Q,V,ce;class Vr{constructor(){x(this,Q);x(this,V);x(this,ce);I(this,Q,{}),I(this,V,0),I(this,ce,0)}get length(){return i(this,ce)-i(this,V)}get isEmpty(){return this.length===0}enqueue(e){return i(this,Q)[i(this,ce)]=e,De(this,ce)._++}dequeue(){if(this.isEmpty)throw new Error("Cannot dequeue from an empty queue.");const e=i(this,Q)[i(this,V)];return delete i(this,Q)[De(this,V)._++],e}peek(){if(this.isEmpty)throw new Error("Cannot peek on an empty queue.");return i(this,Q)[i(this,V)]}}Q=new WeakMap,V=new WeakMap,ce=new WeakMap;let Zr=0;function Xr(){return++Zr}function ea(t){var e;return((e=t==null?void 0:t.payload)==null?void 0:e._$cancelled)===!0&&typeof t.workItemId=="number"}function ta(t){return typeof t.workItemId=="number"}var L,le,Ce,Bt;class ra{constructor(e){x(this,Ce);x(this,L);x(this,le);I(this,L,e),I(this,le,new Map)}connect(e,r,a,s){const n=Y(this,Ce,Bt).call(this,e,r,a);return i(this,L).port.addEventListener("message",n),i(this,L).port.start(),i(this,L).addEventListener("error",s),i(this,le).set(e,s),()=>{i(this,L).removeEventListener("error",s),i(this,L).port.removeEventListener("message",n),i(this,le).delete(e)}}post(e,r){i(this,L).port.postMessage(e,{transfer:r})}terminate(){throw new Error("Shared workers cannot be terminated.")}}L=new WeakMap,le=new WeakMap,Ce=new WeakSet,Bt=function(e,r,a){return s=>{var n;ea(s.data)&&s.data.workItemId===e?(n=i(this,le).get(e))==null||n(new Se(!1)):ta(s.data)&&s.data.workItemId===e?r(s.data.payload)&&a(s.data.payload):console.warn("Work item ID %d:  Unidentified message event: %o",e,s)}};var ke;class et{constructor(e){x(this,ke);I(this,ke,e)}get id(){return i(this,ke)}}ke=new WeakMap;function aa(t){var e;return((e=t==null?void 0:t.payload)==null?void 0:e._$cancelled)===!0&&typeof t.workItemId=="number"}function sa(t){return typeof t.workItemId=="number"}var B,Z,X,$e,Dt;class na{constructor(e){x(this,$e);x(this,B);x(this,Z);x(this,X);I(this,B,e),I(this,Z,!1),I(this,X,new Map)}connect(e,r,a,s){if(i(this,Z)){s(new et(e));return}const n=Y(this,$e,Dt).call(this,e,r,a);return i(this,B).addEventListener("message",n),i(this,B).addEventListener("error",s),i(this,X).set(e,s),()=>{i(this,B).removeEventListener("error",s),i(this,B).removeEventListener("message",n),i(this,X).delete(e)}}post(e,r){if(i(this,Z))throw new Error("The worker has been terminated and cannot accept new messages.");i(this,B).postMessage(e,{transfer:r})}terminate(){if(i(this,Z))return!1;i(this,B).terminate();for(let[e,r]of i(this,X).entries())r(new et(e));return I(this,Z,!0)}}B=new WeakMap,Z=new WeakMap,X=new WeakMap,$e=new WeakSet,Dt=function(e,r,a){return s=>{var n;aa(s.data)&&s.data.workItemId===e?(n=i(this,X).get(e))==null||n(new Se(!1)):sa(s.data)&&s.data.workItemId===e?r(s.data.payload)&&a(s.data.payload):console.warn("Work item ID %d:  Unidentified message event: %o",e,s)}};var q;class ia{constructor(e){x(this,q);I(this,q,e)}get promise(){return i(this,q).data.promise}get id(){return i(this,q).data.id}get status(){return i(this,q).status}cancel(){var e;return i(this,q).cancellationSource&&i(this,q).cancellationSource.signal(),this.status===z.Enqueued&&i(this,q).data.reject(new Se(!0)),(e=i(this,q)).cancelled||(e.cancelled=!!i(this,q).cancellationSource||this.status===z.Cancelled),!!i(this,q).cancellationSource||this.status===z.Cancelled}}q=new WeakMap;var je,zt;class oa{constructor(e,r,a){x(this,je);K(this,"worker");K(this,"data");K(this,"options");K(this,"cancellationSource");K(this,"cancelled");K(this,"status");K(this,"disconnect");this.status=z.Enqueued,this.cancelled=!1,this.worker=e,this.data={...r,resolve:s=>{var n;r.resolve(s),(n=this.disconnect)==null||n.call(this),this.status=z.Completed},reject:s=>{var n;r.reject(s),s instanceof Se?this.status=z.Cancelled:s instanceof et?this.status=z.Terminated:this.status=z.Completed,(n=this.disconnect)==null||n.call(this)}},this.options=a,this.cancellationSource=a!=null&&a.cancellable?new at:void 0}start(){var r,a,s;if(this.disconnect=this.worker.connect(this.data.id,((r=this.options)==null?void 0:r.processMessage)??Y(this,je,zt).bind(this),this.data.resolve,this.data.reject),this.cancelled)return;this.status=z.Started;const e={workItemId:this.data.id,task:this.data.task,cancelToken:(a=this.cancellationSource)==null?void 0:a.token,payload:this.data.payload};this.worker.post(e,(s=this.options)==null?void 0:s.transferables)}}je=new WeakSet,zt=function(e){return!0};const z=Object.freeze({Enqueued:0,Started:1,Cancelled:2,Terminated:3,Completed:4});var pe,ue,ee,Ie,J,Ut,Gt,tt;class ca{constructor(e,r){x(this,J);x(this,pe);x(this,ue);x(this,ee);x(this,Ie);I(this,pe,e instanceof Worker?new na(e):new ra(e)),I(this,ue,new Vr),I(this,ee,!1),I(this,Ie,Object.keys(r).reduce((a,s)=>(a[s]=Y(this,J,Gt).bind(this,s),a),{}))}get enqueue(){return i(this,Ie)}terminate(){return i(this,pe).terminate()}}pe=new WeakMap,ue=new WeakMap,ee=new WeakMap,Ie=new WeakMap,J=new WeakSet,Ut=function(){let e,r;const a=new Promise((s,n)=>{e=s,r=n});return{resolve:e,reject:r,promise:a}},Gt=function(e,r,a){const s=Xr(),{resolve:n,reject:o,promise:_}=Y(this,J,Ut).call(this),y={id:s,task:e,promise:_,resolve:n,reject:o,payload:r},c=new oa(i(this,pe),y,a);return i(this,ee)&&!(a!=null&&a.outOfOrder)?i(this,ue).enqueue(c):(a!=null&&a.outOfOrder||(I(this,ee,!0),_.finally(Y(this,J,tt).bind(this))),c.start()),new ia(c)},tt=function(){if(i(this,ue).isEmpty)I(this,ee,!1);else{const e=i(this,ue).dequeue();e.data.promise.finally(Y(this,J,tt).bind(this)),I(this,ee,!0),e.start()}};function la(t){return typeof t.workItemId=="number"&&t.task&&typeof t.task=="string"}function Ke(t,e,r){self.postMessage({workItemId:t,payload:e},r)}function ua(t){return e=>{if(!la(e.data))return;const r=t[e.data.task];if(typeof r!="function"){console.warn('Async message with task "$s" yields no task function.');return}try{const a=r(e.data.payload,Ke.bind(null,e.data.workItemId),e.data.cancelToken);Ke(e.data.workItemId,a)}catch(a){a instanceof Lt&&Ke(e.data.workItemId,{_$cancelled:!0})}}}let da=0;function fa(t){return`control-${++da}`}function ha(t){const e=t-1;return e*e*e+1}function At(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}function he(t,{delay:e=0,duration:r=400,easing:a=ha,x:s=0,y:n=0,opacity:o=0}={}){const _=getComputedStyle(t),y=+_.opacity,c=_.transform==="none"?"":_.transform,f=y*(1-o),[h,v]=At(s),[A,b]=At(n);return{delay:e,duration:r,easing:a,css:(p,u)=>`
			transform: ${c} translate(${(1-p)*h}${v}, ${(1-p)*A}${b});
			opacity: ${y-f*u}`}}var va=O('<span class="value svelte-11davey"> </span>'),pa=O('<span class="value svelte-11davey"> </span>'),_a=O('<span class="value svelte-11davey"> </span>'),ma=O('<span><span class="value svelte-11davey"><!></span>:<span class="value svelte-11davey"><!></span>:<span class="value svelte-11davey"><!></span></span>');function ga(t,e){Ot(e,!0);let r=xr(e,["$$slots","$$events","$$legacy","class"]),a=se(0),s,n=0,o=Ue(()=>Math.floor(d(a)/3600)),_=Ue(()=>Math.floor((d(a)-d(o)*3600)/60)),y=Ue(()=>Math.trunc(d(a)-d(o)*3600-d(_)*60));const c=180,f=90;function h(M){return M<10?`0${M}`:M.toString()}function v(){s=new Date;const M=Nr(d(a));n=setInterval(()=>{C(a,M+(new Date().getTime()-s.getTime())/1e3)},100)}function A(){return clearInterval(n),d(a)}function b(){A(),C(a,0)}var p=ma();let u;var l=m(p),w=m(l);He(w,()=>d(o),M=>{var k=va(),re=m(k);G(()=>ie(re,h(d(o)))),g(k),fe(1,k,()=>he,()=>({delay:f,duration:c,y:"1em"})),fe(2,k,()=>he,()=>({duration:c,y:"-1em"})),N(M,k)}),g(l);var $=E(l,2),T=m($);He(T,()=>d(_),M=>{var k=pa(),re=m(k);G(()=>ie(re,h(d(_)))),g(k),fe(1,k,()=>he,()=>({delay:f,duration:c,y:"1em"})),fe(2,k,()=>he,()=>({duration:c,y:"-1em"})),N(M,k)}),g($);var j=E($,2),F=m(j);return He(F,()=>d(y),M=>{var k=_a(),re=m(k);G(()=>ie(re,h(d(y)))),g(k),fe(1,k,()=>he,()=>({delay:f,duration:c,y:"1em"})),fe(2,k,()=>he,()=>({duration:c,y:"-1em"})),N(M,k)}),g(j),g(p),G(()=>u=Or(p,u,{class:`timer ${e.class??""}`,...r},"svelte-11davey")),N(t,p),Ct({start:v,stop:A,reset:b})}function wa(t,e,r,a,s,n,o,_,y,c,f){var h;if(((h=d(e))==null?void 0:h.status)===z.Started){C(r,!d(r));return}C(a,0),C(s,0),C(n,!0),C(e,jt(o.worker.enqueue.calculatePrimes({to:_(),pause:d(y)?c==null?void 0:c.token:void 0},{processMessage:f,cancellable:crossOriginIsolated})))}function ya(t,e,r){var a;(a=d(e))==null||a.cancel(),C(r,!1)}var ba=O('<div><span class="display-2"><!></span> <span class="fs-6">Total primes: <!></span></div>'),ka=O('<span class="badge text-bg-secondary ms-auto"> </span>'),Ia=O('<p>Press <span class="badge text-bg-primary">Start</span> to discover primes.</p>'),Sa=O('<div class="class alert alert-danger"><h3>An Error Occurred</h3> <details><summary>Details</summary> <pre> </pre></details></div>'),xa=O('<span class="display-2"><!></span>'),Aa=O('<div class="card h-100"><div class="card-header d-flex flex-row flex-nowrap align-items-baseline"><h5>Primes to <!></h5> <!></div> <div class="card-body text-center d-flex flex-column justify-content-center align-items-center"><div class="row w-100"><div class="col"><input type="range" class="form-range"></div></div> <!></div> <ul class="list-group list-group-flush"><li class="list-group-item"><input type="checkbox" class="form-check-input"> <label>Run as pausable</label></li> <li class="list-group-item d-flex flex-row flex-nowrap gap-2"><button type="button"> </button> <button type="button" class="btn btn-warning">Cancel process</button></li> <li class="list-group-item text-center fs-2"><!></li></ul></div>');function Ye(t,e){Ot(e,!0);const r=(S,P=ne)=>{Oe();var R=Xt();G(()=>ie(R,n.format(P()))),N(S,R)},a=(S,P=ne)=>{var R=ba(),U=m(R),H=m(U);r(H,()=>d(y)),g(U);var ae=E(U,2),We=E(m(ae));r(We,()=>d(o)),g(ae),g(R),G(()=>bt(R,`alert alert-${P()??""} d-flex flex-column justify-content-center`)),N(S,R)};let s=Ar(e,"toNumber",7),n=new Intl.NumberFormat(navigator.languages,{maximumFractionDigits:0}),o=se(0),_=se(void 0),y=se(0),c=se(!1),f=se(!1),h=se(!1),v=crossOriginIsolated?new Xe:void 0;const A=fa();let b;_t(()=>{d(f)&&d(h)?(v==null||v.reset(),ve(()=>b.stop())):d(f)&&d(c)&&(v==null||v.signal(),ve(()=>b.start()))}),_t(()=>{d(c)?(ve(()=>b.reset()),ve(()=>b.start())):ve(()=>b.stop())});function p(S){if(typeof S=="number")yr(o),C(y,jt(S));else{if(S===void 0)return C(c,!1),!0;console.warn("Unknown message from prime worker: %o",S)}return!1}var u=Aa(),l=m(u),w=m(l),$=E(m(w));r($,s),g(w);var T=E(w,2);ge(T,()=>{var S;return(S=d(_))==null?void 0:S.id},S=>{var P=ka(),R=m(P);g(P),G(()=>ie(R,`ID: ${d(_).id??""}`)),N(S,P)}),g(l);var j=E(l,2),F=m(j),M=m(F),k=m(M);wt(k),D(k,"id",`${A??""}_toNumber`),D(k,"min",1e4),D(k,"max",1e6),D(k,"step",1e4),g(M),g(F);var re=E(F,2);ge(re,()=>!d(_),S=>{var P=Ia();N(S,P)},S=>{var P=Qe(),R=Me(P);Tr(R,()=>d(_).promise,U=>{var H=xa(),ae=m(H);r(ae,()=>d(y)),g(H),N(U,H)},U=>{a(U,()=>"success")},(U,H)=>{var ae=Qe(),We=Me(ae);ge(We,()=>d(H)instanceof Se,Fe=>{a(Fe,()=>"danger")},Fe=>{var Le=Sa(),ot=E(m(Le),2),ct=E(m(ot),2),Qt=m(ct);G(()=>{var lt;return ie(Qt,(lt=d(H))==null?void 0:lt.toString())}),g(ct),g(ot),g(Le),N(Fe,Le)}),N(U,ae)}),N(S,P)}),g(j);var st=E(j,2),Pe=m(st),_e=m(Pe);wt(_e),D(_e,"id",A);var Ht=E(_e,2);D(Ht,"for",A),g(Pe);var Re=E(Pe,2),de=m(Re);de.__click=[wa,_,h,y,o,c,e,s,f,v,p];var Kt=m(de);g(de);var nt=E(de,2);nt.__click=[ya,_,c],g(Re);var it=E(Re,2),Yt=m(it);Er(ga(Yt,{}),S=>b=S,()=>b),g(it),g(st),g(u),G(()=>{_e.disabled=!crossOriginIsolated||d(c),bt(de,`btn btn-${(d(c)&&d(f)?"info":"primary")??""}`),de.disabled=d(c)&&!d(f),ie(Kt,d(c)?d(f)&&d(h)?"Resume":d(f)?"Pause":"Running":"Start"),nt.disabled=!d(c)}),Lr(k,s,S=>s(S)),Br(_e,()=>d(f),S=>C(f,S)),N(t,u),Ct()}$t(["click"]);var Ea=O('<div class="banner px-5 py-3 text-bg-primary fs-5 svelte-dnojh8"><p class="svelte-dnojh8">Cast your vote @ <a href="https://devhunt.org/tool/wjfeasync-workers" target="_blank" class="svelte-dnojh8">devhunt.org</a> on <strong>March the 4<sup>th</sup>, 2025.</strong></p></div>');function Na(t){var e=Ea();N(t,e)}const Ta="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20xmlns:xlink='http://www.w3.org/1999/xlink'%20aria-hidden='true'%20role='img'%20class='iconify%20iconify--logos'%20width='26.6'%20height='32'%20preserveAspectRatio='xMidYMid%20meet'%20viewBox='0%200%20256%20308'%3e%3cpath%20fill='%23FF3E00'%20d='M239.682%2040.707C211.113-.182%20154.69-12.301%20113.895%2013.69L42.247%2059.356a82.198%2082.198%200%200%200-37.135%2055.056a86.566%2086.566%200%200%200%208.536%2055.576a82.425%2082.425%200%200%200-12.296%2030.719a87.596%2087.596%200%200%200%2014.964%2066.244c28.574%2040.893%2084.997%2053.007%20125.787%2027.016l71.648-45.664a82.182%2082.182%200%200%200%2037.135-55.057a86.601%2086.601%200%200%200-8.53-55.577a82.409%2082.409%200%200%200%2012.29-30.718a87.573%2087.573%200%200%200-14.963-66.244'%3e%3c/path%3e%3cpath%20fill='%23FFF'%20d='M106.889%20270.841c-23.102%206.007-47.497-3.036-61.103-22.648a52.685%2052.685%200%200%201-9.003-39.85a49.978%2049.978%200%200%201%201.713-6.693l1.35-4.115l3.671%202.697a92.447%2092.447%200%200%200%2028.036%2014.007l2.663.808l-.245%202.659a16.067%2016.067%200%200%200%202.89%2010.656a17.143%2017.143%200%200%200%2018.397%206.828a15.786%2015.786%200%200%200%204.403-1.935l71.67-45.672a14.922%2014.922%200%200%200%206.734-9.977a15.923%2015.923%200%200%200-2.713-12.011a17.156%2017.156%200%200%200-18.404-6.832a15.78%2015.78%200%200%200-4.396%201.933l-27.35%2017.434a52.298%2052.298%200%200%201-14.553%206.391c-23.101%206.007-47.497-3.036-61.101-22.649a52.681%2052.681%200%200%201-9.004-39.849a49.428%2049.428%200%200%201%2022.34-33.114l71.664-45.677a52.218%2052.218%200%200%201%2014.563-6.398c23.101-6.007%2047.497%203.036%2061.101%2022.648a52.685%2052.685%200%200%201%209.004%2039.85a50.559%2050.559%200%200%201-1.713%206.692l-1.35%204.116l-3.67-2.693a92.373%2092.373%200%200%200-28.037-14.013l-2.664-.809l.246-2.658a16.099%2016.099%200%200%200-2.89-10.656a17.143%2017.143%200%200%200-18.398-6.828a15.786%2015.786%200%200%200-4.402%201.935l-71.67%2045.674a14.898%2014.898%200%200%200-6.73%209.975a15.9%2015.9%200%200%200%202.709%2012.012a17.156%2017.156%200%200%200%2018.404%206.832a15.841%2015.841%200%200%200%204.402-1.935l27.345-17.427a52.147%2052.147%200%200%201%2014.552-6.397c23.101-6.006%2047.497%203.037%2061.102%2022.65a52.681%2052.681%200%200%201%209.003%2039.848a49.453%2049.453%200%200%201-22.34%2033.12l-71.664%2045.673a52.218%2052.218%200%200%201-14.563%206.398'%3e%3c/path%3e%3c/svg%3e";function Ma(t,e){for(let r=2;r<=t/2;++r)if(at.throwIfSignaled(e),t%r===0)return!1;return!0}function Oa(t,e,r){for(let a=2;a<=t/2;++a)if(at.throwIfSignaled(r),Xe.isSignaled(e)||Xe.wait(e),t%a===0)return!1;return!0}function Ca(t,e,r,a){let s=e?n=>Oa(n,e,a):n=>Ma(n,a);for(let n=1;n<t;++n)s(n)&&r(n)}const Jt={iExistToShowOffIntellisense(t){console.log("Hello, %s!",t.name)},calculatePrimes(t,e,r){Ca(t.to,t.pause,e,r)}};self.onmessage=ua(Jt);function $a(t){return new Worker(""+new URL("../workers/exampleWorker-MaJg99Kj.js",import.meta.url).href,{name:t==null?void 0:t.name})}var ja=O('<!> <main><div class="container pt-5"><h1><a href="https://svelte.dev" target="_blank" rel="noreferrer"><img alt="Svelte Logo"></a> Prime Workers</h1> <!> <!> <div class="row row-cols-sm-2 row-cols-md-3"><div class="col"><!></div> <div class="col"><!></div> <div class="col"><!></div></div></div></main>',1);function La(t){const e=new ca(new $a,Jt);var r=ja(),a=Me(r);Na(a);var s=E(a,2),n=m(s),o=m(n),_=m(o),y=m(_);D(y,"src",Ta),g(_),Oe(),g(o);var c=E(o,2);zr(c);var f=E(c,2);Hr(f);var h=E(f,2),v=m(h),A=m(v);Ye(A,{toNumber:2e5,worker:e}),g(v);var b=E(v,2),p=m(b);Ye(p,{toNumber:25e4,worker:e}),g(b);var u=E(b,2),l=m(u);Ye(l,{toNumber:3e5,worker:e}),g(u),g(h),g(n),g(s),N(t,r)}export{La as component};
